--- b/init/main.c
+++ a/init/main.c
@@ -915,7 +915,7 @@
 
 static noinline void __init kernel_init_freeable(void);
 
+#if defined(CONFIG_DEBUG_RODATA) || defined(CONFIG_SET_MODULE_RONX)
-#if defined(CONFIG_DEBUG_RODATA) || defined(CONFIG_DEBUG_SET_MODULE_RONX)
 bool rodata_enabled __ro_after_init = true;
 static int __init set_debug_rodata(char *str)
 {
